function ibg(){$.each($(".ibg"),(function(s,a){$(this).find("img").length>0&&$(this).css("background-image",'url("'+$(this).find("img").attr("src")+'")')}))}function forms(){$("input,textarea").focus((function(){$(this).val()==$(this).attr("data-value")&&($(this).addClass("focus"),$(this).parent().addClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","password"),$(this).val("")),removeError($(this))})),$("input[data-value], textarea[data-value]").each((function(){""!=this.value&&this.value!=$(this).attr("data-value")||($(this).hasClass("l")&&0==$(this).parent().find(".form__label").length?$(this).parent().append('<div class="form__label">'+$(this).attr("data-value")+"</div>"):this.value=$(this).attr("data-value")),this.value!=$(this).attr("data-value")&&""!=this.value&&($(this).addClass("focus"),$(this).parent().addClass("focus"),$(this).hasClass("l")&&0==$(this).parent().find(".form__label").length&&$(this).parent().append('<div class="form__label">'+$(this).attr("data-value")+"</div>")),$(this).click((function(){this.value==$(this).attr("data-value")&&("pass"==$(this).attr("data-type")&&$(this).attr("type","password"),this.value="")})),$(this).blur((function(){""==this.value&&($(this).hasClass("l")||(this.value=$(this).attr("data-value")),$(this).removeClass("focus"),$(this).parent().removeClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","text")),$(this).hasClass("vn")&&formValidate($(this))}))})),$(".form-input__viewpass").click((function(s){$(this).hasClass("active")?$(this).parent().find("input").attr("type","password"):$(this).parent().find("input").attr("type","text"),$(this).toggleClass("active")}))}function formValidate(s){var a=0,t=s.parents("form");if("email"==s.attr("name")||s.hasClass("email")){if(s.val()!=s.attr("data-value")){var e=s.val().replace(" ","");s.val(e)}/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(s.val())&&s.val()!=s.attr("data-value")?removeError(s):(a++,addError(s))}else""==s.val()||s.val()==s.attr("data-value")?(a++,addError(s)):removeError(s);return"checkbox"==s.attr("type")&&(1==s.prop("checked")?s.removeClass("err").parent().removeClass("err"):(a++,s.addClass("err").parent().addClass("err"))),s.hasClass("name")&&(/^[А-Яа-яa-zA-Z-]+( [А-Яа-яa-zA-Z-]+)$/.test(s.val())||(a++,addError(s))),s.hasClass("pass-2")&&(t.find(".pass-1").val()!=t.find(".pass-2").val()?addError(s):removeError(s)),a}function formLoad(){$(".popup").hide(),$(".popup-message-body").hide(),$(".popup-message .popup-body").append('<div class="popup-loading"><div class="popup-loading__title">Идет загрузка...</div><div class="popup-loading__icon"></div></div>'),$(".popup-message").addClass("active").fadeIn(300)}function showMessageByClass(s){$(".popup").hide(),popupOpen("message."+s,"")}function showMessage(s){$(".popup-loading").remove(),$(".popup-message-body").show().html(s)}function clearForm(s){$.each(s.find(".input"),(function(s,a){$(this).removeClass("focus").val($(this).data("value")),$(this).parent().removeClass("focus"),$(this).hasClass("phone")&&maskclear($(this))}))}function addError(s){if(s.addClass("err"),s.parent().addClass("err"),s.parent().find(".form__error").remove(),s.hasClass("email")){var a="";null!=(a=(""==s.val()||(s.val(),s.attr("data-value")),s.data("error")))&&s.parent().append('<div class="form__error">'+a+"</div>")}else null!=s.data("error")&&0==s.parent().find(".form__error").length&&s.parent().append('<div class="form__error">'+s.data("error")+"</div>");s.parents(".select-block").length>0&&(s.parents(".select-block").parent().addClass("err"),s.parents(".select-block").find(".select").addClass("err"))}function addErrorByName(s,a,t){var e=s.find('[name="'+a+'"]');e.attr("data-error",t),addError(e)}function addFormError(s,a){s.find(".form__generalerror").show().html(a)}function removeFormError(s){s.find(".form__generalerror").hide().html("")}function removeError(s){s.removeClass("err"),s.parent().removeClass("err"),s.parent().find(".form__error").remove(),s.parents(".select-block").length>0&&(s.parents(".select-block").parent().removeClass("err"),s.parents(".select-block").find(".select").removeClass("err").removeClass("active"))}function removeFormErrors(s){s.find(".err").removeClass("err"),s.find(".form__error").remove()}function sectors(s){var a=$(window).outerWidth(),t=$(window).outerHeight(),e=80;a<768&&(e=50),s>0?$("header").addClass("scroll"):$("header").removeClass("scroll"),s>t?$("#up").fadeIn(300):$("#up").fadeOut(300),$.each($(".sector"),(function(a,r){var o=$(this).outerHeight(),l=$(this).offset().top;if(s>=l&&s<=l+o-t&&($(".sector.scroll").removeClass("scroll"),$(this).addClass("scroll")),$(this).hasClass("scroll")&&(s>=l&&s<=l+o-t?$(this).hasClass("normalscroll")?$("body").addClass("scroll"):$("body").removeClass("scroll"):$(this).hasClass("normalscroll")&&$("body").removeClass("scroll")),s>l-t/1.5&&s<l+o?($(".dotts").length>0&&dotts(a,0),$(this).addClass("active")):$(this).removeClass("active"),s>l-t&&s<l+o){if($(this).addClass("view"),$(this).hasClass("padding")){var i=e/100*(100-(l-s)/t*100);i>=e&&(i=e),$(this).css({paddingTop:i})}}else $(this).removeClass("view")}))}function dotts(s,a){1==a&&$.each($(".sector"),(function(s,a){$(".dotts-list").append("<li></li>")})),$(".dotts-list li").removeClass("active").eq(s).addClass("active")}$(".slider__body").length>0&&$(".slider__body").slick({dots:!0,arrows:!1,accessibility:!1,slidesToShow:1,autoplaySpeed:3e3,adaptiveHeight:!0,nextArrow:'<button type="button" class="slick-next"></button>',prevArrow:'<button type="button" class="slick-prev"></button>',responsive:[{breakpoint:768,settings:{}}]}),$(".wrapper").addClass("loaded"),$(".icon-menu").click((function(s){$(this).toggleClass("active"),$(".menu__body").toggleClass("active"),$("body").toggleClass("lock")})),ibg(),forms(),$("form button[type=submit]").click((function(){var s=0,a=$(this).parents("form"),t=a.data("ms");return $.each(a.find(".req"),(function(a,t){s+=formValidate($(this))})),0==s&&(removeFormError(a),null!=t&&""!=t?(showMessageByClass(t),!1):void 0)})),sectors($(this).scrollTop()),$(window).scroll((function(s){sectors($(this).scrollTop())})),$("body").on("click",".dotts-list li",(function(s){var a=$(this).index()+1;$("body,html").animate({scrollTop:$(".sector-"+a).offset().top+0},800,(function(){}))}));